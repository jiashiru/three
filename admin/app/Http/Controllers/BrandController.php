<?phpnamespace App\Http\Controllers;use DB;use App\Model\Brand;use Illuminate\Http\Request;class BrandController extends CommonController{    //品牌展示    public function show()    {        $brandList = Brand::paginate(3);        return view('brand.show', ['brandList' => $brandList]);    }    //品牌添加    public function add(Request $request)    {        if ($request->isMethod('POST')) {            $data = $request->input();            $img = $request->file('brand_logo');            if ($img->isValid()) {                //源文件名                $originalName = $img->getClientOriginalName();                $path = public_path('upload');                $img->move($path, $originalName);                $admin = new Brand();                $admin->brand_name = $data['brand_name'];                $admin->site_url = $data['site_url'];                $admin->brand_logo = $originalName;                $admin->brand_desc = $data['brand_desc'];                $admin->sort = $data['sort'];                $admin->is_show = $data['is_show'];                if ($admin->save()) {                    return redirect('brandShow')->with('success', '添加成功');                } else {                    return redirect('brandAdd')->with('error', '添加失败');                }            }        }        return view('brand.add');    }    //品牌修改    public function edit(Request $request)    {        if ($request->isMethod('POST')) {            $data = $request->input();            $img = $request->file('brand_logo');            if ($img->isValid()) {                //源文件名                $originalName = $img->getClientOriginalName();                $path = public_path('upload');                $img->move($path, $originalName);                $admin = Brand::find($data['brand_id']);                $admin->brand_name = $data['brand_name'];                $admin->site_url = $data['site_url'];                $admin->brand_logo = $originalName;                $admin->brand_desc = $data['brand_desc'];                $admin->sort = $data['sort'];                $admin->is_show = $data['is_show'];                if ($admin->save()) {                    return redirect('brandShow')->with('success', '修改成功');                } else {                    return redirect('brandEdit')->with('error', '修改失败');                }            }        }        $brand_id = $request->get('id');        $brandList = Brand::find($brand_id)->toArray();        return view('brand.edit', ['brandList' => $brandList]);    }    //品牌删除    public function delete(Request $request)    {        $brand_id = $request->get('id');        $bool = Brand::where('brand_id', '=', $brand_id)->delete();        if ($bool) {            return redirect('brandShow')->with('success', '删除成功');        } else {            return redirect('brandShow')->with('error', '删除失败');        }    }}
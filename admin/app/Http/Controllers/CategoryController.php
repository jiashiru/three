<?phpnamespace App\Http\Controllers;use DB;use App\Model\Type;use App\Model\Category;use Illuminate\Http\Request;class CategoryController extends CommonController{    //类型展示    public function show()    {        $categoryList = Category::paginate(3);        return view('category.show', ['categoryList' => $categoryList]);    }    //类型添加    public function add(Request $request)    {        if ($request->isMethod('POST')) {            $data = $request->input();            $category = new Category();            $category->cate_name = $data['cate_name'];            $category->parent_id = $data['parent_id'];            $category->sort = $data['sort'];            $category->is_show = $data['is_show'];            $category->show_in_nav = $data['show_in_nav'];            $category->keywords = $data['keywords'];            $category->cate_desc = $data['cate_desc'];            if ($category->save()) {                return redirect('categoryShow')->with('success', '添加成功');            } else {                return redirect('categoryAdd')->with('error', '添加失败');            }        }        $typeList = Type::all()->toArray();        return view('category.add', ['typeList' => $typeList]);    }    //类型修改    public function edit(Request $request)    {        if ($request->isMethod('POST')) {            $data = $request->input();            $category = Category::find($data['cate_id']);            $category->cate_name = $data['cate_name'];            $category->parent_id = $data['parent_id'];            $category->sort = $data['sort'];            $category->is_show = $data['is_show'];            $category->show_in_nav = $data['show_in_nav'];            $category->keywords = $data['keywords'];            $category->cate_desc = $data['cate_desc'];            if ($category->save()) {                return redirect('categoryShow')->with('success', '修改成功');            } else {                return redirect('categoryEdit')->with('error', '修改失败');            }        }        $cate_id = $request->get('id');        $categoryList = Category::find($cate_id)->toArray();        $typeList = Type::all()->toArray();        return view('category.edit', ['categoryList' => $categoryList, 'typeList' => $typeList]);    }    //类型删除    public function delete(Request $request)    {        $cate_id = $request->get('id');        $bool = Category::where('cate_id', '=', $cate_id)->delete();        if ($bool) {            return redirect('categoryShow')->with('success', '删除成功');        } else {            return redirect('categoryShow')->with('error', '删除失败');        }    }}
$(function(){var J=5*(1/24)*(1/60);var U="_SHOW_VC_CODE";var A=null;var z=null;var a=$("#div_screen-right");var d=false;var h=true;var y=true;var S=306;var j=120;var n="";var C=$("#vcCanvas");C.css({width:S+"px"});var aa=$("#dragBtn");var b=$("#dragBtnLeft");var k=$("#dragBtnContainer");var T=$("#canvasContainer");var E=aa.outerWidth();var p=$("#vcCodeContainerLi");aa.draggable({containment:"#dragBtnContainer",start:function(){if(y===false){return false}if(!w.checkUserName(true)){return false}},drag:function(ac,ad){if(y===false){return false}var ab=ad.position.left;b.css("width",ab+"px")},stop:function(ac,ae){if(y===false){return false}var ab=ae.position.left;var ad=k.outerWidth();if(ab<ad-E){aa.animate({left:"0"});b.animate({width:"0"})}else{GetJPData("https://passport.1yyg.com","getVcChar","key="+H,function(af){if(af.state==1){i();$(".canvas-wrapper").hide();G(null,"请求验证码太频繁，请稍后再试");return false}else{if(af.state==0){var ag=af.str;$("#selectedChar").text(ag);k.children(".vc-slide-text").hide();k.children(".vc-slideBtnLeft").find("span:eq(1)").hide();k.children(".vc-slideBtnLeft").find("span:eq(0),a").show();T.parent().show();T.css("height",j+"px");aa.css({"float":"left",left:ab+"px"});aa.children("i").removeClass("ready-status vali-status wrong-status right-status").addClass("vali-status");C.attr("src","https://passport.1yyg.com/api/GetVcImg.html?"+u(ag));y=false;h=false}}})}}});var x=function(){h=false;a.addClass("block-code");p.show()};var r=function(){if(!w.checkUserName(true)){return false}C.hide();GetJPData("https://passport.1yyg.com","getVcChar","key="+H,function(ab){if(ab.state==1){i();$(".canvas-wrapper").hide();G(null,"请求验证码太频繁，请稍后再试");return false}else{if(ab.state==0){var ac=ab.str;$("#selectedChar").text(ac);k.children(".vc-slideBtnLeft").find("span:eq(1)").hide();k.children(".vc-slideBtnLeft").find("span:eq(0),a").show();T.parent().show();T.css("height",j+"px");C.attr("src","https://passport.1yyg.com/api/GetVcImg.html?"+u(ac)).show();h=false}}})};var i=function(){b.css("width","0");aa.animate({left:"0"});k.children(".vc-slide-text").show();k.children(".vc-slideBtnLeft").find("span:eq(1)").hide();k.children(".vc-slideBtnLeft").find("span:eq(0),a").hide();y=true;h=false;aa.children("i").removeClass("ready-status vali-status wrong-status right-status").addClass("ready-status")};function u(ac){var ab="width="+S+"&height="+j+"&isAdvancedVcCode="+d+"&selectedChar="+ac;return ab}var s=$("#refreshVcCode");var M=null;s.click(function(){if(M!=null){console.log("too fast！！");return}M=setTimeout(function(){M=null},200);aa.children("i").attr("class","passport-icon ready-status vali-status");r()});C.click(function(ad){var ac=C.offset().left;var af=C.offset().top;var ab=ad.pageX-ac;var ae=ad.pageY-af;GetJPData("https://passport.1yyg.com","VcCompare","x="+ab+"&y="+ae,function(ag){if(ag.state==1){if(ag.num==1){aa.children("i").attr("class","passport-icon wrong-status");r();return false}else{i();$(".canvas-wrapper").hide();G(null,"请求验证码太频繁，请稍后再试");return false}}else{if(ag.state==0){n=ag.str;h=true;b.find("span:eq(0),a").hide();b.find("span:eq(1)").show();aa.children("i").attr("class","passport-icon right-status");T.parent().hide()}}})});var v=$.cookie(U);if(v=="1"){x()}else{a.removeClass("block-code")}var O="https://skin.1yyg.net";var D=$("#username");var P=$("#pwd");var t=$("#j-tips-wrap");var H=null;var m=null;var Y="";var c=false;var Z=/\w+(@{1})$/i,l=["qq.com","vip.qq.com","sina.com","foxmail.com","139.com","sohu.com"],I="",F=0;var V=function(ac){var ab=function(af,ag,ad){var ae=new RegExp(ag,"g");return af.replace(ae,ad)};var ac=escape(ac);ac=ab(ac,"\\+","%2B");ac=ab(ac,"/","%2F");return ac};var f=function(ac){var ab=/^1\d{10}$/;if(!ab.exec(ac)){return false}else{return true}};var L=function(ab){var ac=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(ac.test(ab)){return true}return false};var N=function(ac){var ab=/^[\S]{6,20}$/;if(!ab.exec(ac)){return false}return true};var q=function(){try{if(_IsIE&&_IeVersion==6){Base.getScript(O+"/JS/iepng.js?date=20150215",function(){if(EvPNG!=null&&EvPNG!=undefined){EvPNG.fix(".transparent-png")}})}}catch(ab){}};var G=function(ab,ac){if(ab){$(ab).parent().addClass("enter-focus")}$("#dd_error_msg").html('<i class="passport-icon transparent-png"></i>'+ac).show(5,function(){q()});$("dd.key-capital").hide();$("#btnSubmitLogin").removeClass("letter-noSpac").html("登录");c=false};var Q=function(ab){if(ab){$(ab).parent().removeClass("enter-focus")}$("#dd_error_msg").hide()};var g=null;var X=null;X=setInterval(function(){if(D.val()!=""){if(!f(D.val())&&!L(D.val())){D.val("");D.siblings("em").show();P.val("");P.siblings("em").show();P.blur()}else{D.siblings("em").hide()}}if(P.val()!=""){if(!N(P.val())){P.val("");if(D.val()==""){P.blur()}P.siblings("em").show()}else{P.siblings("em").hide()}}},200);var B=function(){if(X!=null){clearInterval(X);X=null;if(g!=null){clearTimeout(g);g=null}}};g=setTimeout(function(){B()},5000);var e=$("#a_clear");D.focus(function(){$(this).parent().addClass("enter-focus");if($(this).val()!=""){e.show()}}).blur(function(){if(X!=null){return}$(this).parent().removeClass("enter-focus");if($(this).val()==""){$(this).siblings("em").show();$(this).css("color","#bbbbbb");$("#dd_error_msg").hide();return}w.checkUserName(false)}).click(function(ab){B();ab=ab||window.event;ab.stopPropagation();if(t.children().length>0&&D.val().indexOf("@")!==-1&&D.val().slice(0,1)!=="@"){t.show()}}).keydown(function(){$(this).css("color","#333333");D.siblings("em").hide()}).keyup(function(){if($(this).val()!=""){e.show()}});if(D.val()==""){D.siblings("em").bind("click",function(){D.focus()}).show()}e.click(function(){D.val("");$(this).hide();D.focus()});D.keyup(function(ai){ai=ai||window.event;ai.stopPropagation();var ac=this.value,ag=0,af=0,ah=l.length,ab=ai.keyCode,ad="";if(Z.test(ac)){for(;ag<ah;ag++){I+="<li class='j-tips'>"+(ac+l[ag])+"</li>"}t.show().empty().html(I);I=""}else{var aj=ac.indexOf("@");if(aj!==-1&&ac.slice(0,aj+1)!=="@"&&ac.slice(aj+1)!==""){var ae=ac.slice(0,aj+1),al=ac.slice(aj+1);for(;af<ah;af++){if(l[af].indexOf(al)!==-1){ad+="<li class='j-tips'>"+(ae+l[af])+"</li>"}}if(ad!==""){t.show().empty().html(ad)}else{t.hide();F=0}}else{F=0;if(t.css("display")==="block"){t.hide()}}}if(t.css("display")==="block"){var ak=t.find("li");switch(ab){case 13:if(F>0){D.val(ak.eq(F-1).text().trim()).blur();t.hide();P.focus();F=0}break;case 40:F=F+1>ak.length?1:F+1;ak.removeClass("selected").eq(F-1).addClass("selected");break;case 38:F=F-1<1?ak.length:F-1;ak.removeClass("selected").eq(F-1).addClass("selected");break;case 37:ak.removeClass("selected").eq(F-1).addClass("selected");break;case 39:ak.removeClass("selected").eq(F-1).addClass("selected");break;default:break}}});t.click(function(ac){ac=ac||window.event;ac.stopPropagation();var ab=ac.target||ac.srcElement;if(ab.tagName.toLowerCase()==="li"){D.val($(ab).text().trim()).blur();P.focus()}$(this).hide()});$(window).click(function(ac){if(t.css("display")!=="block"){return}ac=ac||window.event;var ab=ac.target||ac.srcElement,ad=ab.id.toLowerCase();if(ad!=="j-tips-wrap"||ad!=="username"){t.hide()}});P.focus(function(){$(this).parent().addClass("enter-focus");t.hide()}).blur(function(){if(X!=null){return}$(this).parent().removeClass("enter-focus");if($(this).val()==""){$(this).siblings("em").show();$(this).css("color","#bbbbbb");$("#dd_error_msg").hide();return}w.checkPwd(false)}).keydown(function(){$(this).css("color","#333333");$(this).siblings("em").hide()});if(P.val()==""){P.siblings("em").bind("click",function(){P.focus()}).show()}Base.getScript(O+"/JS/capsLockTip.js?date=20160319",function(){P.capsLockTip(function(ab){if(ab){$("#dd_error_msg").hide();$("#key_capital").show()}else{$("#key_capital").hide()}})});var W=function(){this.checkUserName=function(ab){H=D.val().trim();if(H==""){if(ab){D.focus()}G(D,"请输入手机号或邮箱地址");return false}else{if(!f(H)&&!L(H)){if(ab){D.focus()}G(D,"请输入正确的手机号或邮箱地址");return false}}Q(D);return true};this.checkPwd=function(ab){m=P.val().trim();if(m==""){if(ab){P.focus()}G(P,"请输入登录密码");return false}else{if(!N(m)){if(ab){P.focus()}G(P,"登录密码为6-20长度的字符");return false}}Q(P);return true}};var w=new W();var o=function(){var ab=$("#hidAccount").val();if(ab!=""&&(f(ab)||L(ab))){D.siblings("em").hide();D.val(ab);if(P.val()==""){P.focus()}}else{var ad=$.cookie("_uName");if(ad!=null&&(f(ad)||L(ad))){D.siblings("em").hide();D.val(ad);if(P.val()==""){P.focus()}}}if(P.val()!=""){P.siblings("em").hide()}var ac=function(){B();if(c){return false}c=true;if(w.checkUserName(true)&&w.checkPwd(true)){if(h===false){G(null,"请按住滑块，拖动到最右边");return false}$("#btnSubmitLogin").addClass("letter-noSpac").html("正在登录...");var ae=function(af){var ag=af.state;if(ag==0){$.cookie("_uName",H,{domain:"1yyg.com",expires:365});location.replace($("#hidLoginForward").val())}else{if(ag==1&&(af.num==-1||af.num==-6||af.num==-7)){if(af.str=="1"){i();x();if(af.num==-1){$.cookie(U,1,{expires:J,domain:"1yyg.com"});P.val("").focus();G(P,"登录密码错误，请重新输入！")}else{if(af.num==-6){G(null,"验证码错误，请重新验证！")}else{if(af.num==-7){G(null,"请拖动滑块完成验证！")}}}}else{P.val("").focus();G(P,"登录密码错误，请重新输入！")}}else{if(ag==1&&af.num==-2){D.focus();G(D,"此账号不存在，请重新输入！")}else{if(ag==1&&af.num==-3){G(D,"此账号已被冻结，请与客服联系！")}else{if(ag==1&&af.num==-4){G(D,"此账号未激活，请与客服联系！")}else{if(ag==1&&af.num==-5){G(P,"密码被系统锁定，请点击“忘记密码”重新设置！")}else{if(ag==3&&af.num==1){G(null,"失败次数超限，被冻结5分钟！")}else{if(ag==3&&af.num==2){G(null,"失败次数超限，IP被冻结！！")}}}}}}}}};GetJPData("","userlogin","name="+H+"&pwd="+V(m)+"&auth="+n,ae)}};$("#LoginForm").keydown(function(af){B();var ae=(window.event)?event.keyCode:af.keyCode;if(ae==32){return false}else{if(ae==13){ac()}}return true}).bind("click",function(){B()});$(document).on("click","#btnSubmitLogin",function(){ac()});GetJPData("https://api.1yyg.com","getbysortid","ID=9",function(ah){var ak="";if(ah.state==0){var ag=ah.listItems;if(ag.length>0){var af=parseInt($.cookie("loginad"));var ai=null;if(!isNaN(af)&&af<(ag.length-1)){ai=ag[af+1];$.cookie("loginad",af+1,{expires:365})}else{ai=ag[0];$.cookie("loginad",0,{expires:365})}if(ai!=null&&ai.type==0&&ai.src!=""){var ae="";var aj=ai.alt.reAjaxStr();if(aj.indexOf("#")>-1){ae=ai.alt.reAjaxStr()+" url("+ai.src.replace("http://","https://")+") top center no-repeat;"}else{ae="url("+ai.src.replace("http://","https://")+") top center no-repeat;"}$("#g_login").attr("style","background:"+ae);if(ai.url!=""){$("#loadingPicBlock").html('<a href="'+ai.url+'" target="_blank"></a>')}}}}});if(D.val()==""){D.focus()}};$("#qq_login_btn").click(function(){$.cookie("qFromUrl",$("#hidLoginForward").val());window.open("https://graph.qq.com/oauth2.0/authorize?which=ConfirmPage&response_type=code&client_id="+$("#hidQQAppID").val()+"&redirect_uri="+escape("https://passport.1yyg.com/qcback.html")+"&state=qq&scope=get_user_info&display=pc")});var K=false;var R=false;$("#wx_login_btn").click(function(){$.cookie("qFromUrl",$("#hidLoginForward").val());if(_IsIE&&_IeVersion==6){window.open("https://open.weixin.qq.com/connect/qrconnect?appid="+$("#hidWxAppID").val()+"&redirect_uri="+escape("https://passport.1yyg.com/qcback.html")+"&response_type=code&scope=snsapi_login&state=wx#wechat_redirect")}else{var ab=$("#wxLogin");var ag=$("#LoginForm");var ad=$("#a_return",ab);var af=function(){if(R){return}R=true;ab.show().outerHeight(a.height());ab.animate({right:0},{queue:false,duration:500,complete:function(){ad.unbind("click").bind("click",function(){ae()})}})};var ae=function(){if(!R){return}R=false;ab.animate({right:-390},{queue:false,duration:500,complete:function(){}})};var ac=function(){if($("#p_code").html().length==0){var ah=new WxLogin({id:"p_code",appid:$("#hidWxAppID").val(),scope:"snsapi_login",redirect_uri:escape("https://passport.1yyg.com/qcback.html"),state:"wx",style:"",href:"https://skin.1yyg.net/Passport/css/layout.css?date=0617"})}af()};if(K){ac()}else{Base.getScript("https://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js",function(){ac();K=true})}}});Base.getScript(O+"/JS/AjaxFun.js?date=20130123",o)});